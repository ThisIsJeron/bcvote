const http = require('http');
const express = require('express');
const MessagingResponse = require('twilio').twiml.MessagingResponse;

const app = express();
const fs = require('fs');

// Twilio Credentials
var accountSid = 'ACa2c293449cb04276aa45cdd8ac130342';
var authToken = 'ed115b94915402b317ff74151b981198';

//require the Twilio module and create a REST client
var client = require('twilio')(accountSid, authToken);

client.messages.create({
    to: "+14088217529",
    from: "+14085603576",
    body: "Hello Jeron, please indicate your vote for the 2020 presidential election",
}, function(err, message) {
    console.log(message.sid);
});


app.post('/sms', (req, res) => {
  const twiml = new MessagingResponse();
  var str1 = 'Your vote has been recorded. Your country thanks you for voting! Your transaction ID is: ';
  var str2 = potentials[Math.floor(Math.random() * 100)];
  fs.writeFile('message.txt', str2, (err) => {
  if (err) throw err;
    console.log('The file has been saved!');
  });
  var banana = str1.concat(str2);
  twiml.message(banana);

  res.writeHead(200, {'Content-Type': 'text/xml'});
  res.end(twiml.toString());
});

http.createServer(app).listen(1337, () => {
  console.log('Express server listening on port 1337');
});

var potentials = [
  "2df4ad95a559ccd9da28fef9daea2b5e8f28c263736f4e38dcba0ee5464045c5",
  "1db68f628f9dd0914a8e840b3c33de216c0042dd0b0878663eaf675b8baa1bcc",
  "1cd8fb487294ac4cdbff38d78f4d57e0b17221dba0f3daecb21a6ee8f1e3cc1b",
  "4d640aa70004384189f129933c748f229f1c62570dfdd8cc534b889f25fa4f21",
  "1a4f3b2729845d38a51736da03defeb8f9392bc44d7a7558ce076387a85bb412",
  "299b4588ff356a50fb24a1f695a07dc5e32d49c80d939620e790a5fa1e97ae67",
  "339e850e43b15a4505fac19846772d2951f301cf1f5e53f50da1150f66e74ea0",
  "4fc12e6194438a0258db2a6e607bc7be08ca14a02af16473c56c935f5a7ac057",
  "2fb27c3ec77e7b4871186c8c5d1aab9c0387aa8a7156b43d4c8bf630b70d9571",
  "18106af18b82e0fb20dbc97b150e8eac9509161e485587190b599cb9cf811ff3",
  "4a112062d2245f4d47c14a8f2508278ebc464d92e9e7fa48cf48fa6bdca78442",
  "23a62019c523e34697d6e06c897741ffdb9acbbd978834298017aa12f2d7c65d",
  "7b9a420bf4f7d6e2f05580b10a76f359b1fc76c895fea500f2b8545d4acba0d9",
  "5059f33b7dec9ed1019dbb52091409e18d9c2731363277f5135d52168708305f",
  "5ad48853793730ccae6f4dfc756a2f253dde5a5f8108545415a1762279e4a903",
  "5624486fe5dbf64a196d20b84937e5c7c779febf20638e12c462aad6254250a0",
  "43c4bcacd5672e44adb8e341ed1aa041b647fe180d18cc23077399982340f52f",
  "1abf06a33dfc2a2611458f652b09eb04093d7115200da27ce9db64b89b000c69",
  "404cf9b5f7b7d2be5e1a02d1cad0717ef3ca81cfd0d3a9646b6e9638e14038aa",
  "3c0fd50ac722df692a5db6b7b6703d95ce4c6e241daa4df24ab9727a1e916ed9",
  "01c9e9aa99753f70a54366f5021a84889465433c7ab5a73d4351fb7942cd3eb0",
  "7713a2f531408bf27d74e1124377dd542d248bec195ea2d0b975d7fe164503c8",
  "414d08626c6ffee20562956086ab562880030b53d767dd859d4c1d4b1dc915d3",
  "7fadd999cc99e817362cc40202136eb68ea31758dfe669ad2417c16d758eca56",
  "1856014b1885e1b32429b0a390d5e891e248ca62817362937b2ce553f63650a4",
  "40ec7b1fefe973c4cecb626891a908f6e2d7075c61151aee359c65912223c379",
  "376fa6075666c34cdea8aaccb4328f0ffb3aae4a4492a0dd1edd1b99b5848892",
  "7287572239f3abd36ab27f6089c8c69a6a8fd2fdf701c5b32ce399067283b18b",
  "60bd17a9855eaf6f8bfc34aeff9b69803ecdedaa3a2e38dbdb08851afe6b18b7",
  "422c71fe0ab774200e9eee1f60196e877ed3edb03cfca7fdb4e1f94865365e96",
  "3dd0df55eaccf58982f1d31b4737af0989773c45bd086b77742ca849cb7fa67c",
  "7b4f35eff3e4820387ec60e32d2a549c30e5bf44fa7883af831529ac1e82a3b4",
  "00c20c183423e38f61eb3e5a56e4c2f0b91ab0102a06ceb594a5f9c63084c331",
  "43bbd93f36ed77a470ca96336f0186bf9f689bd289ece99bf2bf3d9591a068dc",
  "0f05bdabc6a74cd97823aa6d48dfbac58e209ba916c2b2b446a665d0c67f8a0a",
  "3fc4fe30981a0889f38a7b57a87d31d081cfcde2b8106af226976a4dac361277",
  "59948c90df57cc311ac49a0681c658103ec55927dbff9bcb12c6cd6aac0bc2f1",
  "4e4536c654097c7b0ae26dfb31c7c9cdc2e3a81ec0f0f3c72f8a11d4a8318ed6",
  "19045932f435506a2e108e0bfb72f88d8f11ce558cdfc5a459dc9dd9f76e4218",
  "031d3d1a8efc1382d6eb80e322ed4f1fe70c2047d354e45bdda50412db3f4990",
  "4db4e4c9e3474692c1ae3e6faef1312c0e80d548145ba3b63adfa48c8b0a927d",
  "3d56babc4a0c64c4c3e407d1f27d91736081087856a79b70fce795ba858c6748",
  "744c3f1c48e724c89a86a3be3223a66bcbb2c67f77dfe2d8ea018d3bfa5c8815",
  "2b6f074a0ff77f8470a2d51c4af0d6a6e4e9e3215e6abbef2c99a0b2dd5b850f",
  "14997e0bad9c0bd5d94cc0da397d91f526be482b4d44eec46f873ddb3402393b",
  "674b5205acfa4d9f6cc492a325b98b96231308827dc8529e53418d92b3bdcda7",
  "5c8d4189ff09dbdf632658acf90af07c6cc43bc25b0cee0f00a0055cf1925d2e",
  "0e0e574c49389fc1b7f1f6959af6640c78ee00bcd806fb695df11596c632643d",
  "474c6366e9be6c8b593d49114da65ff369211d4fcb088602abb2618f584575c3",
  "62325cc64d6e0e946c226b34c3a33cf2b05ed8dd61f5526a6e4646cba934cf94",
  "5953707f847a7b1c5182e8a5c456ed42f834833bc2d83e46c81d39eb4e93c1c8",
  "4c799511b652f093b83e901697da11d10e9c1f2e7c69bea6cb70f61998386bb7",
  "529acea758577aa4eb2830f03a2bf861cc53a1f1897d330d9eeeffc010d6e3a6",
  "4390f83d818382d15f32b5790a7ae20fede2b72766efe04adb9166bf922c7c28",
  "1e3d46ae81d1a20b88c20a41fcf5d032283b0fef6a0d29a35ce66fcd8b6048fc",
  "3fe35cdba640651b5a0c20e82ce8668ac860a25072ffa8a1ddd1b832667667cc",
  "3fb21caf3f233f5bf4fa4eb255c5cf5bcc676e16df41dc2f8521e8eedf6b8463",
  "07ccf5a2d6d2abb3fb9c2ab22c433e861247cc02ac4cb995e0f84aee031a4265",
  "36cd6bd07f3a269cdd1ffccb91d8d969bb8d7fe228762d127abbd5da5ab17e92",
  "16970086eaeea30e48522d079a03df502e6cf18a76b9c2f9a2fab1d5af24bc88",
  "213eca71102546675654d1404f985bf7e11654d38645de3bba24dd0006202b30",
  "071bf90169464b1cd7660c5904157abbaf06864a2f73ea18e9df433f31648e7d",
  "4f07fb6f34225cf88605d83b81821d80802008c067bf58bde2689b28f8f97e7c",
  "4adfd9007b8fae6805e4b78acd64312ad68d38338b878c87fabfcf1200e8818a",
  "41a2657c67ec3bce70817571414ad8d8ca071d8d3f8e827261f70c5b66d27ecf",
  "6939419d971dc358a4ddaa09306798176b059c4fe0ba655fe6f1159daba5da59",
  "11252b7980e185bfd500d0e2c1ed5607ae27024de3aaaf2144e1995fcc378024",
  "3d80afc7591eee2cb5c9336d0a15812d1ebc475df8dcb6df9ffda3346228f96d",
  "68fb9da0acc60c24115939a98585d1a9f23ef3aca32f79d4f9418cbb07bfb936",
  "62d23a148e9f95f018acaed440999e0a3226c670010d2e80d67c673c85508972",
  "1553725940a89ced84bb643eeff9f202481b08e9b59428dab85ab296d435faff",
  "4b26af5c16590b42bd61bc488b386c747b240bdeaf021d5f7fc278d714ce27b4",
  "085b82ee58280d6b39628b42cc1667390a587dca081c80c51a26f83097478df6",
  "05bf118ae377ae9ea09a8a34732e8e165d269c854c5e8469c097836aead900a7",
  "458f8db84d64e54de04d27a0e2abce38eb72cbc91d62837c65d310c31fb424f7",
  "08896a22ec521cc2df146f7c46d9a85046b54bf49a3084120132f002ee138476",
  "4884f12e7482c88d0c12530098d8db13bf55d0024af8f421ae31d44429396eb8",
  "1473b591aa539e603f9581a01c3401502650ad9b0a0eb3fefd217d28ae621fc7",
  "56cb3237f274af37e5340657d463b111dc527dcc95a0132de35b464a83224572",
  "36ff79e2709b7269f816779db5a3a373fca63f51d45bd311158e74c181ceb3d7",
  "4474da68d73505e67c6f6880f8a55b5c345f99cb96cb859c0cc88d2855bbf78d",
  "527e81620b4369206762fb05b3823c81e95a02b125dcaa867f785c085a8f8231",
  "4fded23fedc1861beb655c78c0e7a93d2c7c56eea9736a452e1010282d359813",
  "12bd37791e168634d4fb498e1373658b8c1f588bbf2691a874fd62ae5a386d08",
  "4d4d9c18cf05cfe0e3225fb436665ecef939167f43ad9a5d7fe9d6a4dbdfe012",
  "5f3cddcdb080cd363735b80d55166bad0963d865237d02b4c6295f29bf6f7fa9",
  "6bf7b2ed68ed0f803b076c1874f90cf6a1b02d1199c224f1c563e7503e9cfc12",
  "151637bf15cbcbd1fc608a3991c67e49c3648e0a723999049849f05adfdd3bff",
  "3664da2b0876acf005d91de0545f193c3061ba2d62a5484a7771deb5c5868885",
  "5d5e04c3f18da0ee27a0e3f122eb62017cf06428402a619915f2ab8b6c9c1e6f",
  "266190631e937ebc76d6ea2d2424a8e4dcac4b9eaf952e4fa77b7477ed400948",
  "254c77d4c51498bc62c2e7bb1d48b94c4beee4395dd61ff6e9e5093b4cc020fd",
  "300b8771a7719892674fb2fe137a9d2a334b49b8b4b368d5a4a87baf2d67b888",
  "1aaa4b195e9ab391f2733e90c1f28baa33d347af6ce09347982732083eb6d470",
  "320451c5d0ffd22abf78a677ec2b0daceb761f013200a5753b462027588de0d8",
  "6bd8cd081a777d839758318cbee8ecb3761940ca2ab30e26b6fe7a229bc40bf6",
  "7d025327ae43e291381511da677f363e0dfbbb29537b1a2add63a7cca0dcce72",
  "09bbd4a25279f2c5d17f65c81c154c16005152e3641012c531ec87fa8098cb75",
  "655f910fd7097c81903ba074908a8bfbe6d498c6ea68d2fae7532c4083fd1f63",
  "4034986d93001b47599e57f6d70ae97f2ad3cf7c94e95ed227b4a888035ab33a"
]
